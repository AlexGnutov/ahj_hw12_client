const version="v4",cacheName="ahj-v4",files=["/","/img/1.png","/img/2.png","/img/3.png","/index.html","/main.css","/main.js","/favicon.ico"];async function putFilesToCache(e){const a=await caches.open("ahj-v4");await a.addAll(e)}async function removeOldCache(e){const a=await caches.keys();return Promise.all(a.filter((a=>!e.includes(a))).map((e=>caches.delete(e))))}function fromCache(e){return caches.open("ahj-v4").then((a=>a.match(e)))}function networkOrCache(e){return fetch(e).then((a=>a.ok?a:fromCache(e))).catch((()=>fromCache(e)))}self.addEventListener("install",(e=>{e.waitUntil((async()=>{await putFilesToCache(files),await self.skipWaiting()})())})),self.addEventListener("activate",(e=>{e.waitUntil((async()=>{await removeOldCache(["ahj-v4"]),await self.clients.claim()})())})),self.addEventListener("fetch",(e=>{const a=new URL(e.request.url);a.pathname.startsWith("/api")||a.pathname.startsWith("/sockjs")||e.respondWith(networkOrCache(e.request))}));